var h,m=function(){function a(a,b){e[a]=d[a]=c[a]=b}function b(a,b){e[a]=c[a]=b}var c={p:Prism.l.m.p},d={},e={},g={m:["markup","html","xml"],H:["javascript","js"]},f;for(f in Prism.l)if(Prism.l.hasOwnProperty(f)){var l=Prism.l[f];if("function"!==typeof l){var k=g[f];b("code-block fenced "+f,{pattern:new RegExp("(^ {0,3}|\\n {0,3})(([`~])\\3\\3) *("+(k?k.join("|"):f)+")( [^`\n]*)? *\\n(?:[\\s\\S]*?)\\n {0,3}(\\2\\3*(?= *\\n)|$)","gi"),b:!0,a:{"code-language":{pattern:/(^([`~])\2+)((?!\2)[^\2\n])+/,
b:!0},"marker code-fence start":/^([`~])\1+/,"marker code-fence end":/([`~])\1+$/,"code-inner":{pattern:/(^\n)[\s\S]*(?=\n$)/,b:!0,C:"language-"+f,a:l}}})}}b("code-block fenced untagged",{pattern:/(^ {0,3}|\n {0,3})(([`~])\3\3)[^`\n]*\n(?:[\s\S]*?)\n {0,3}(\2\3*(?= *\n)|$)/g,b:!0,a:{"code-language":{pattern:/(^([`~])\2+)((?!\2)[^\2\n])+/,b:!0},"marker code-fence start":/^([`~])\1+/,"marker code-fence end":/([`~])\1+$/,"code-inner":{pattern:/(^\n)[\s\S]*(?=\n$)/,b:!0}}});b("heading setext-heading heading-1",
{pattern:/^ {0,3}[^\s].*\n {0,3}=+[ \t]*$/gm,a:{"marker heading-setext-line":{pattern:/^( {0,3}[^\s].*\n) {0,3}=+[ \t]*$/gm,b:!0},n:d}});b("heading setext-heading heading-2",{pattern:/^ {0,3}[^\s].*\n {0,3}-+[ \t]*$/gm,a:{"marker heading-setext-line":{pattern:/^( {0,3}[^\s].*\n) {0,3}-+[ \t]*$/gm,b:!0},n:d}});g={"marker heading-hash start":/^ *#+ */,"marker heading-hash end":/ +#+ *$/,n:d};for(f=1;6>=f;f+=1)b("heading heading-"+f,{pattern:new RegExp("^ {0,3}#{"+f+"}(?!#).*$","gm"),a:g});f={pattern:/^\[(?:\\.|[^\[\]]|\[[^\[\]]*\])*\]/,
a:{"marker bracket start":/^\[/,"marker bracket end":/\]$/,"link-text-inner":{pattern:/[\w\W]+/,a:d}}};var g={pattern:/\[(?:\\.|[^\]])*\]/,a:{"marker bracket start":/^\[/,"marker bracket end":/\]$/,"link-label-inner":/[\w\W]+/}},l={pattern:/^!\[(?:\\.|[^\[\]]|\[[^\[\]]*\])*\]/,a:{"marker image-bang":/^!/,"marker bracket start":/^\[/,"marker bracket end":/\]$/,"image-text-inner":{pattern:/[\w\W]+/,a:d}}},k={pattern:/^(\s*)(?!<)(?:\\.|[^\(\)\s]|\([^\(\)\s]*\))+/,b:!0},v={pattern:/^(\s*)<(?:\\.|[^<>\n])*>/,
b:!0,a:{"marker brace start":/^</,"marker brace end":/>$/,"braced-href-inner":/[\w\W]+/}},w={pattern:/('(?:\\'|[^'])+'|"(?:\\"|[^"])+")\s*$/,a:{"marker quote start":/^['"]/,"marker quote end":/['"]$/,"title-inner":/[\w\W]+/}},x={pattern:/\( *(?:(?!<)(?:\\.|[^\(\)\s]|\([^\(\)\s]*\))*|<(?:[^<>\n]|\\.)*>)( +('(?:[^']|\\')+'|"(?:[^"]|\\")+"))? *\)/,a:{"marker bracket start":/^\(/,"marker bracket end":/\)$/,"link-params-inner":{pattern:/[\w\W]+/,a:{"link-title":w,href:k,"braced-href":v}}}};b("hr",{pattern:/^[\t ]*([*\-_])([\t ]*\1){2,}([\t ]*$)/gm,
a:{"marker hr-marker":/[*\-_]/g}});b("urldef",{pattern:/^( {0,3})\[(?:\\.|[^\]])+]: *\n? *(?:(?!<)(?:\\.|[^\(\)\s]|\([^\(\)\s]*\))*|<(?:[^<>\n]|\\.)*>)( *\n? *('(?:\\'|[^'])+'|"(?:\\"|[^"])+"))?$/gm,b:!0,a:{"link-label":g,"marker urldef-colon":/^:/,"link-title":w,href:k,"braced-href":v}});b("blockquote",{pattern:/^[\t ]*>[\t ]?.+(?:\n(?!\n)|.)*/gm,a:{"marker quote-marker":/^[\t ]*>[\t ]?/gm,"blockquote-content":{pattern:/[^>]+/,n:e}}});b("list",{pattern:/^[\t ]*([*+\-]|\d+\.)[\t ].+(?:\n(?!\n)|.)*/gm,
a:{I:{pattern:/^[\t ]*([*+\-]|\d+\.)[\t ].+(?:\n|[ \t]+[^*+\- \t].*\n)*/gm,a:{"marker list-item":/^[ \t]*([*+\-]|\d+\.)[ \t]/m,n:e}}}});b("code-block indented",{pattern:/(^|(?:^|(?:^|\n)(?![ \t]*([*+\-]|\d+\.)[ \t]).*\n)\s*?\n)((?: {4}|\t).*(?:\n|$))+/g,b:!0});b("p",{pattern:/[^\n](?:\n(?!\n)|.)*[^\n]/g,a:d});a("image",{pattern:/(^|[^\\])!\[(?:\\.|[^\[\]]|\[[^\[\]]*\])*\]\(\s*(?:(?!<)(?:\\.|[^\(\)\s]|\([^\(\)\s]*\))*|<(?:[^<>\n]|\\.)*>)(\s+('(?:[^']|\\')+'|"(?:[^"]|\\")+"))?\s*\)/,b:!0,a:{"link-text":l,
"link-params":x}});a("link",{pattern:/(^|[^\\])\[(?:\\.|[^\[\]]|\[[^\[\]]*\])*\]\(\s*(?:(?!<)(?:\\.|[^\(\)\s]|\([^\(\)\s]*\))*|<(?:[^<>\n]|\\.)*>)(\s+('(?:[^']|\\')+'|"(?:[^"]|\\")+"))?\s*\)/,b:!0,a:{"link-text":f,"link-params":x}});a("image image-ref",{pattern:/(^|[^\\])!\[(?:\\.|[^\[\]]|\[[^\[\]]*\])*\] ?\[(?:\\.|[^\]])*\]/,b:!0,a:{"link-text":l,"link-label":g}});a("link link-ref",{pattern:/(^|[^\\])\[(?:\\.|[^\[\]]|\[[^\[\]]*\])*\] ?\[(?:\\.|[^\]])*\]/,b:!0,a:{"link-text":f,"link-label":g}});a("image image-ref shortcut-ref",
{pattern:/(^|[^\\])!\[(?:\\.|[^\[\]]|\[[^\[\]]*\])*\]/,b:!0,a:{"marker image-bang":/^!/,"link-text":f}});a("link link-ref shortcut-ref",{pattern:/(^|[^\\])\[(?:\\.|[^\[\]]|\[[^\[\]]*\])*\]/,b:!0,a:{"link-text":f}});a("code",{pattern:/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/g,b:!0,a:{"marker code-marker start":/^`/,"marker code-marker end":/`$/,"code-inner":/[\w\W]+/}});a("strong",{pattern:/(^|[^\\*_]|\\[*_])([_\*])\2(?:\n(?!\n)|.)+?\2{2}(?!\2)/g,b:!0,a:{"marker strong-marker start":/^(\*\*|__)/,"marker strong-marker end":/(\*\*|__)$/,
"strong-inner":{pattern:/[\w\W]+/,a:d}}});a("em",{pattern:/(^|[^\\*_]|\\[*_])(\*|_)(?:\n(?!\n)|.)+?\2(?!\2)/g,b:!0,a:{"marker em-marker start":/^(\*|_)/,"marker em-marker end":/(\*|_)$/,"em-inner":{pattern:/[\w\W]+/,a:d}}});a("strike",{pattern:/(^|\n|(?!\\)\W)(~~)(?=\S)([^\r]*?\S)\2/gm,b:!0,a:{"marker strike-marker start":/^~~/,"marker strike-marker end":/~~$/,"strike-inner":{pattern:/[\w\W]+/,a:d}}});a("comment",Prism.l.m.p);f=Prism.l.m.tag;a("tag",{pattern:new RegExp("(^|[^\\\\])"+f.pattern.source,
"i"),b:!0,a:f.a});a("entity",Prism.l.m.D);return c}(),n={J:function(a){var b=a.start,c=a.e.slice(a.e.lastIndexOf("\n")+1),d=c.match(/^\s*/)[0],e="";/^ {0,3}$/.test(d)&&(c=c.slice(d.length),/^[*+\-]\s+/.test(c)?e+=c.match(/^[*+\-]\s+/)[0]:/^\d+\.\s+/.test(c)?e+=c.match(/^\d+\.\s+/)[0].replace(/^\d+/,function(a){return+a+1}):/^>/.test(c)&&(e+=c.match(/^>\s*/)[0]));d+=e;a.e+="\n"+d;e=a.g;a.g="";a.start+=1+d.length;a.end=a.start;return{add:"\n"+d,d:e,start:b}},G:function(a,b){var c=a.e.lastIndexOf("\n")+
1;if(b.inverse)/\s/.test(a.e.charAt(c))&&(a.e=a.e.splice(c,1),--a.start),a.g=a.g.replace(/\r?\n(?!\r?\n)\s/,"\n");else if(a.g||b.q)a.e=a.e.splice(c,0,"\t"),a.g=a.g.replace(/\r?\n/,"\n\t"),a.start+=1;else return a.e+="\t",a.start+=1,a.end+=1,{add:"\t",d:"",start:a.start-1};a.end=a.start+a.g.length;return{action:"indent",start:a.start,end:a.end,inverse:b.inverse}}};function p(a){this.h=a}
function q(a){var b=getSelection();if(!b.rangeCount)return 0;var c=b.getRangeAt(0),d=b=c.startContainer,c=c.startOffset;if(!(a.h.compareDocumentPosition(b)&16))return 0;do{for(;b=b.previousSibling;)b.textContent&&(c+=b.textContent.length);b=d=d.parentNode}while(b&&b!==a.h);return c}function r(a){var b=getSelection();return b.rangeCount?q(a)+String(b.getRangeAt(0)).length:0}
function t(a,b,c,d){var e=document.createRange(),g=u(a.h,b),f=g;c&&c!==b&&(f=u(a.h,c));!1!==d&&y.call(a,f.element,f.offset);e.setStart(g.element,g.offset);e.setEnd(f.element,f.offset);a=getSelection();a.removeAllRanges();a.addRange(e)}var z=document.createElement("span");z.style.position="absolute";z.innerHTML="|";
function y(a,b){var c=a.textContent,d=a.parentNode,e=c.slice(0,b);a.textContent=c.slice(b);e=document.createTextNode(e);d.insertBefore(z,a);d.insertBefore(e,z);var g=z.offsetTop,f=z.offsetHeight,l=this.h.offsetHeight,k=this.h.scrollTop;a.textContent=c;d.removeChild(z);d.removeChild(e);console.log(g-k);0>g-k?this.h.scrollTop=g:g-k+f>l&&(this.h.scrollTop=g+f-l)}
function u(a,b){if(!a)return null;var c=0,d=a;do{var e=d;if(d=d.firstChild){do{var g=d.textContent.length;if(c<=b&&c+g>b)break;c+=g}while(d=d.nextSibling)}if(!d)break}while(d&&d.hasChildNodes()&&3!=d.nodeType);if(d)return{element:d,offset:b-c};if(e){for(d=e;d&&d.lastChild;)d=d.lastChild;return 3===d.nodeType?{element:d,offset:d.textContent.length}:{element:d,offset:0}}return{element:a,offset:0,error:!0}}function A(a){this.r=a;this.j=[];this.o=[]}
A.prototype.action=function(a){var b;if(b=this.j.length)b=this.j[this.j.length-1],b=!b.action&&!a.action&&!Array.isArray(b)&&!Array.isArray(a)&&!(b.d&&a.add)&&!(b.add&&a.d)&&!(b.add&&!a.add)&&!(!b.add&&a.add)&&!(b.add&&b.d)&&!(a.add&&a.d)&&b.start+b.add.length===a.start+a.d.length;b?this.j.push(B(this.j.pop(),a)):this.j.push(a);this.o=[]};function B(a,b){return{add:a.add+b.add,d:b.d+a.d,start:Math.min(a.start,b.start)}}
A.prototype.apply=function C(b){Array.isArray(b)?b.forEach(C.bind(this)):b.action?this.r.action(b.action,{inverse:b.inverse,start:b.start,end:b.end,A:!0}):this.r.apply(b)};
function D(a){"PRE"===a.tagName?this.f=a:(this.f=document.createElement("pre"),a.appendChild(this.f));this.f.className="mdedit";this.c=new p(a);this.i=new A(this);a.addEventListener("cut",this.t.bind(this),!1);a.addEventListener("paste",this.B.bind(this),!1);a.addEventListener("keyup",this.w.bind(this),!1);a.addEventListener("input",this.k.bind(this),!1);a.addEventListener("keydown",this.u.bind(this),!1);a.addEventListener("keypress",this.v.bind(this),!1);this.k()}h=D.prototype;
h.w=function(a){a=a&&a.keyCode||0;-1<[9,91,93,16,17,18,20,13,112,113,114,115,116,117,118,119,120,121,122,123,27].indexOf(a)||-1===[37,39,38,40].indexOf(a)&&this.k()};h.k=function(){var a=this.f.textContent,b=q(this.c),c=r(this.c);E();this.f.innerHTML=Prism.F(a,m);F.scrollTop=G;G=void 0;null===b&&null===c||t(this.c,b,c)};h.v=function(a){if(!a.metaKey&&!a.q&&(a=a.charCode)){var b=q(this.c),c=r(this.c);this.i.action({add:String.fromCharCode(a),d:b===c?"":this.f.textContent.slice(b,c),start:b})}};
h.u=function(a){var b=a.metaKey||a.ctrlKey;switch(a.keyCode){case 8:case 46:var b=q(this.c),c=r(this.c),d=b===c?1:Math.abs(c-b),b=8===a.keyCode?c-d:b;this.i.action({add:"",d:this.f.textContent.slice(b,b+d),start:b});break;case 9:b||(this.action("indent",{inverse:a.shiftKey}),a.preventDefault());break;case 219:case 221:b&&!a.shiftKey&&(this.action("indent",{inverse:219===a.keyCode,q:!0}),a.preventDefault());break;case 13:this.action("newline");a.preventDefault();break;case 89:b&&(b=this.i,b.o.length&&
(c=b.o.pop(),b.j.push(c),b.apply(c)),a.preventDefault());break;case 90:b&&(this.i[a.shiftKey?"redo":"undo"](),a.preventDefault())}};h.apply=function(a){var b=this.f;b.textContent=b.textContent.splice(a.start,a.d.length,a.add);t(this.c,a.start,a.start+a.add.length);this.k()};
h.action=function(a,b){b=b||{};var c=this.f.textContent,d=b.start||q(this.c),e=b.end||r(this.c),c={start:d,end:e,e:c.slice(0,d),s:c.slice(e),g:c.slice(d,e)},d=n[a](c,b);E();this.f.textContent=c.e+c.g+c.s;d&&!b.A&&this.i.action(d);t(this.c,c.start,c.end,!1);this.k()};h.t=function(){var a=q(this.c),b=r(this.c);a!==b&&this.i.action({add:"",d:this.f.textContent.slice(a,b),start:a})};
h.B=function(a){var b=q(this.c),c=r(this.c),c=b===c?"":this.f.textContent.slice(b,c);a.clipboardData&&(a.preventDefault(),a=a.clipboardData.getData("text/plain"),document.execCommand("insertText",!1,a),this.i.action({add:a,d:c,start:b}),b+=a.length,t(this.c,b,b),this.k())};var F=document.getElementsByTagName("pre")[0],G;function E(){void 0===G&&(G=F.scrollTop);setTimeout(function(){G=void 0},500)}String.prototype.splice=function(a,b,c){return this.slice(0,a)+(c||"")+this.slice(a+(+b||0))};new D(F);
